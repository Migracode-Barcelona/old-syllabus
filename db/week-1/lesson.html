
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Week 18 - Introduction to SQL Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-prism/prism-tomorrow.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="../week-2/lesson.html" />
    
    
    <link rel="prev" href="../../node/week-14/lesson.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        <li class="header">Course</li>
        
        
    
        <li class="chapter " data-level="1.1" data-path="../../">
            
                <a href="../../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" >
            
                <span>
            
                    
                    Before you start
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="../../others/lesson0.html">
            
                <a href="../../others/lesson0.html">
            
                    
                    Week 0 - Introduction and basic setup
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="../../others/house-rules.html">
            
                <a href="../../others/house-rules.html">
            
                    
                    House Rules
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="../../CODE_OF_CONDUCT.html">
            
                <a href="../../CODE_OF_CONDUCT.html">
            
                    
                    Code of Conduct
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../../html-css/">
            
                <a href="../../html-css/">
            
                    
                    HTML/CSS
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="../../html-css/week-01/lesson.html">
            
                <a href="../../html-css/week-01/lesson.html">
            
                    
                    Week 1 - Semantic HTML and CSS
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="../../html-css/week-02/lesson.html">
            
                <a href="../../html-css/week-02/lesson.html">
            
                    
                    Week 2 - Responsive Web, Layout and Flexbox
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="../../html-css/week-03/lesson.html">
            
                <a href="../../html-css/week-03/lesson.html">
            
                    
                    Week 3 - HTML Forms
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../../js-core/">
            
                <a href="../../js-core/">
            
                    
                    JavaScript I
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../../js-core/week-04/lesson.html">
            
                <a href="../../js-core/week-04/lesson.html">
            
                    
                    Week 4 - Hello JavaScript
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../../js-core/week-05/lesson.html">
            
                <a href="../../js-core/week-05/lesson.html">
            
                    
                    Week 5 - Arrays
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="../../js-core/week-06/lesson.html">
            
                <a href="../../js-core/week-06/lesson.html">
            
                    
                    Week 6 - More Arrays
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../../js-core-2/">
            
                <a href="../../js-core-2/">
            
                    
                    JavaScript II
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="../../js-core-2/week-07/lesson.html">
            
                <a href="../../js-core-2/week-07/lesson.html">
            
                    
                    Week 7 - Objects
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="../../js-core-2/week-08/lesson.html">
            
                <a href="../../js-core-2/week-08/lesson.html">
            
                    
                    Week 8 - JS in the Browser
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="../../js-core-2/week-09/lesson.html">
            
                <a href="../../js-core-2/week-09/lesson.html">
            
                    
                    Week 9 - More JS in the Browser
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../../js-core-3/">
            
                <a href="../../js-core-3/">
            
                    
                    JavaScript III
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="../../js-core-3/week-10/lesson.html">
            
                <a href="../../js-core-3/week-10/lesson.html">
            
                    
                    Week 10 - Unit Tests and TDD
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="../../js-core-3/week-11/lesson.html">
            
                <a href="../../js-core-3/week-11/lesson.html">
            
                    
                    Week 11 - More TDD, ES6
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3" data-path="../../js-core-3/week-12/lesson.html">
            
                <a href="../../js-core-3/week-12/lesson.html">
            
                    
                    Week 12 - Recap
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="../../react/">
            
                <a href="../../react/">
            
                    
                    React
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="../../react/week-1/lesson.html">
            
                <a href="../../react/week-1/lesson.html">
            
                    
                    Week 13 - React 101
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2" data-path="../../react/week-2/lesson.html">
            
                <a href="../../react/week-2/lesson.html">
            
                    
                    Week 14 - Reacting to Changes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3" data-path="../../react/week-3/lesson.html">
            
                <a href="../../react/week-3/lesson.html">
            
                    
                    Week 15 - Fetching Data
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.4" data-path="../../react/week-4/lesson.html">
            
                <a href="../../react/week-4/lesson.html">
            
                    
                    Routing (optional)
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="../../node/">
            
                <a href="../../node/">
            
                    
                    Node/DB
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1" data-path="../../node/week-13/lesson.html">
            
                <a href="../../node/week-13/lesson.html">
            
                    
                    Week 16 - Node and Express 101
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2" data-path="../../node/week-14/lesson.html">
            
                <a href="../../node/week-14/lesson.html">
            
                    
                    Week 17 - More APIs in Node
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.8.3" data-path="lesson.html">
            
                <a href="lesson.html">
            
                    
                    Week 18 - Introduction to SQL
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.4" data-path="../week-2/lesson.html">
            
                <a href="../week-2/lesson.html">
            
                    
                    Week 19 - More SQL and integration with NodeJS
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.5" data-path="../week-3/lesson.html">
            
                <a href="../week-3/lesson.html">
            
                    
                    Week 20 - More integration with NodeJS
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.6" >
            
                <span>
            
                    
                    Revision
            
                </span>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="header">Useful information</li>
        
        
    
        <li class="chapter " data-level="2.1" data-path="../../others/useful-links.html">
            
                <a href="../../others/useful-links.html">
            
                    
                    Useful links
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="../../others/PRACTICES.html">
            
                <a href="../../others/PRACTICES.html">
            
                    
                    Coding Standards and Best Practices
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="../../others/making-a-pull-request.html">
            
                <a href="../../others/making-a-pull-request.html">
            
                    
                    Making a Pull Request
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.4" data-path="../../others/career-development.html">
            
                <a href="../../others/career-development.html">
            
                    
                    Career Development
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Other resources</li>
        
        
    
        <li class="chapter " data-level="3.1" data-path="../../others/coding-101.html">
            
                <a href="../../others/coding-101.html">
            
                    
                    Coding 101
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="../../others/aws-workshop-2.html">
            
                <a href="../../others/aws-workshop-2.html">
            
                    
                    AWS - DynamoDB
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.3" >
            
                <a target="_blank" href="https://github.com/Thomas-Stewart/syllabus/tree/master/java">
            
                    
                    Java module
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">For Mentors</li>
        
        
    
        <li class="chapter " data-level="4.1" data-path="../../CONTRIBUTING.html">
            
                <a href="../../CONTRIBUTING.html">
            
                    
                    Contributing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.2" data-path="../../others/lesson-template.html">
            
                <a href="../../others/lesson-template.html">
            
                    
                    Lesson Template
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../.." >Week 18 - Introduction to SQL</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="database-1-introduction-to-sql">Database 1: Introduction to SQL</h1>
<p><strong>What will we learn today?</strong></p>
<ul>
<li><p><a href="#introduction-to-databases">Introduction to databases</a></p>
<ul>
<li>Why do we need them?</li>
<li>Different types of database</li>
</ul>
</li>
<li><p><a href="#introduction-to-postgresql">Introduction to PostgreSQL</a></p>
<ul>
<li>What is SQL?</li>
<li>What is a RDBMS?</li>
<li>What characterises a relational database?</li>
<li>Database modeling exercise</li>
<li>Check your PostgreSQL installation</li>
</ul>
</li>
<li><p><a href="#communicating-with-the-database-using-sql">Communicating with the database using SQL</a></p>
<ul>
<li>Creating a new database</li>
<li>Creating a table</li>
<li>Inserting data</li>
<li>Retrieving data</li>
<li>Retrieving data with conditions</li>
</ul>
</li>
<li><p><a href="#homework">Homework</a></p>
</li>
</ul>
<h2 id="introduction-to-databases">Introduction to databases</h2>
<p>A database is a structured set of data held in a computer. It provides ways to store, retrieve and organize information.</p>
<h3 id="why-do-we-need-them">Why do we need them?</h3>
<p>In the past few weeks, you stored and retrieved data using files. This is fine for simple data but it can quickly become an issue as your application becomes more complex and needs to store and manipulate more complicated data. For example, imagine you want to develop the next biggest hotel booking application. You will need to store the list of hotels available for booking somewhere, and as you add more features, you will need to save users information, the reviews they post for each hotel, but also the bookings each user makes. You can see that the data you need to handle can become very complicated, especially when you need to consider that data are not static, as they can be updated or deleted. To work more effectively with data, we can then use a database, which present the following benefits:</p>
<ul>
<li>A database defines a structure for your data and the relationships between entities</li>
<li>A database provides convenient and performant ways to safely store and retrieve data</li>
<li>A database provides a mechanism to check the validity of your data</li>
</ul>
<h3 id="different-types-of-database">Different types of database</h3>
<p>There are many different kinds of database and different implementations. Sometimes, a database type is a better fit to certain use case or certain problems. The most well-known database types include relational database, key/value database, graph database and document database (also known as NoSQL). For this class, we will focus specifically on relational database as they are the most widely used and supported. You can consult <a href="https://db-engines.com/en/ranking" target="_blank">DB-Engines</a> to see a ranking of the most used database, as you can see, there is a lot of them!</p>
<h2 id="introduction-to-postgresql">Introduction to PostgreSQL</h2>
<p><em>&quot;PostgreSQL is a powerful, open source object-relational database system that uses and extends the SQL language combined with many features that safely store and scale the most complicated data workloads. The origins of PostgreSQL date back to 1986 as part of the POSTGRES project at the University of California at Berkeley and has more than 30 years of active development on the core platform.&quot;</em> (source: <a href="https://www.postgresql.org/about/" target="_blank">postgresql.org</a>)</p>
<h3 id="what-is-sql">What is SQL?</h3>
<ul>
<li>Pronounced S-Q-L or sequel</li>
<li>Stands for Structured Query Language</li>
<li>SQL is the standard language used to communicate with relational database</li>
<li>SQL statements are used to query, create, update, delete records in a database</li>
<li>SQL statements are executed by a RDBMS.</li>
</ul>
<h3 id="what-is-a-rdbms">What is a RDBMS?</h3>
<ul>
<li>Stands for Relational Database Management System</li>
<li>It is a program that processes SQL statements to manage a relational database</li>
<li>PostgreSQL is a RDBMS.</li>
</ul>
<h3 id="what-characterizes-a-relational-database">What characterizes a relational database?</h3>
<p>As mentioned previously, a relational database is a specific type of database. Data is stored in <em>tables</em> of <em>rows</em> and <em>columns</em> as per the example below:</p>
<!-- ![table-diagram](table-diagram.png) -->
<p align="center">
  <img src="table-diagram.png" display="block" width="60%">
</p>

<p><strong>How about storing everything in one big table as shown below? Why isn&apos;t it a good idea?</strong></p>
<p>A customer could have several bookings. If the customer changes their telephone number, you would have to update every single rows for this customer with their new number, which is more prone to errors. As a general rule, try to avoid duplication of data, and instead design your system in a way that you have a single source of truth for each piece of data. The example below is <strong>NOT</strong> a good solution.</p>
<!-- ![combined-diagram](combined-diagram.png) -->
<p align="center">
  <img src="combined-diagram.png" display="block" width="60%">
</p>


<h3 id="database-modeling-exercise">Database modeling exercise</h3>
<p><strong>Scenario:</strong> You&apos;ve been hired to create a database for a new company which wants to revolutionize the hotel booking market. The first task you&apos;ve been given is to model how the company would store its data in a database. Here are your requirements:</p>
<ul>
<li>The company wants to store in the database all the hotels available on their website</li>
<li>For each hotel, the company wants to record the name of the hotel, the number of rooms and the zipcode.</li>
<li>The company also needs to store the information of customers who registered on their website with a name, an email and an address.</li>
<li>Customers need to be able to record their bank details which consist of an account number and a sort code.</li>
<li>Finally, as customers can book a room in an hotel starting on a specific date for a specific number of nights, the company wants to store the bookings.</li>
</ul>
<p>With mentors help, model the database for this company. In particular, show the different entities, fields and relationships between each entity.</p>
<h3 id="check-your-postgresql-installation">Check your PostgreSQL installation</h3>
<p>Open a terminal in your laptop and verify the command <code>psql -V</code> returns the version of PostgreSQL. In psql, you can type use the command <code>help</code> to show the help menu. Within the command prompt, you can enter SQL statements and run them against PostgreSQL. To quit psql, enter the command <code>\q</code>.</p>
<h2 id="communicating-with-the-database-using-sql">Communicating with the database using SQL</h2>
<p>All commands in the following need to be entered in a psql command prompt. However, sometimes it&apos;s easier to write the code in a file and then load the file with psql. For example, if you write your SQL code in a file called <code>test.sql</code>, you can then execute it with <code>psql -d DATABASE_NAME -f test.sql</code>.</p>
<h3 id="creating-a-new-database">Creating a new database</h3>
<p>In a terminal, create a new database named <code>cyf_hotels</code> with the following command:</p>
<pre class="language-"><code>createdb cyf_hotels
</code></pre><p>Then connect to your database with:</p>
<pre class="language-"><code class="lang-sql">psql cyf_hotels
</code></pre>
<h3 id="creating-a-table">Creating a table</h3>
<p>Data are stored in tables. Let&apos;s first create a <code>customers</code> table to hold the details of customers.</p>
<pre class="language-"><code class="lang-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> customers <span class="token punctuation">(</span>
    id        <span class="token keyword">SERIAL</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">,</span>
    name      <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    email     <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">120</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    address   <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">120</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    city      <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    postcode  <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    country   <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>Few things to mention from the SQL statement above:</p>
<ul>
<li><code>SERIAL PRIMARY KEY</code> defines the column <code>id</code> as a unique identifier for each row. Moreover, this identifier will automatically incremented every time data is inserted. <code>id</code> is called the primary key of the table <code>customers</code>.</li>
<li><code>VARCHAR(20)</code> defines the column to hold text data with a maximum length of 20 characters</li>
<li><code>NOT NULL</code> defines the column as not nullable, which means that you must set a value.</li>
<li>Other useful types include <code>INT</code>, <code>TEXT</code>, <code>BOOLEAN</code> and <code>DATE</code>.</li>
<li>The database will reject any values which don&apos;t match the type.</li>
</ul>
<h4 id="exercise-1">Exercise 1</h4>
<ul>
<li>Create the <code>customers</code> table in the <code>cyf_hotels</code> database.</li>
<li>Verify that the table <code>customers</code> is created with the psql command <code>\dt</code> which lists the existing tables.</li>
<li>Display the table <code>customers</code> definition with the command <code>\d customers</code> and verify that it matches what you expect.</li>
<li>Create a new table <code>hotels</code> in the <code>cyf_hotels</code> database with the following columns: an <code>id</code>, a <code>name</code>, the number of <code>rooms</code> and the hotel <code>postcode</code>. Use the commands above to verify that the table is correctly created.</li>
</ul>
<p>Now that we have a table to store <code>customers</code> and a table to store <code>hotels</code>, we can create a table to hold the bookings of customers for an hotel with the checkin date and the number of nights they intend to stay:</p>
<pre class="language-"><code class="lang-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> bookings <span class="token punctuation">(</span>
    id               <span class="token keyword">SERIAL</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">,</span>
    customer_id      <span class="token keyword">INT</span> <span class="token keyword">REFERENCES</span> customers<span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">,</span>
    hotel_id         <span class="token keyword">INT</span> <span class="token keyword">REFERENCES</span> hotels<span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">,</span>
    checkin_date     <span class="token keyword">DATE</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    nights           <span class="token keyword">INT</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>In the above, <code>customer_id</code> and <code>hotel_id</code> are called <strong>foreign keys</strong> as they reference an id from a different table. This set a very strong constraint as you will not be able to create a booking for a customer id which does not exist in the customers table!</p>
<h4 id="exercise-2">Exercise 2</h4>
<ul>
<li>Create the table <code>bookings</code> in your <code>cyf_hotels</code> database and verify that it is correctly created.</li>
</ul>
<h3 id="inserting-data">Inserting data</h3>
<p>Once your <code>customers</code>, <code>hotels</code> and <code>bookings</code> table are created, you can insert data with the following SQL statements:</p>
<pre class="language-"><code class="lang-sql"><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> customers <span class="token punctuation">(</span>name<span class="token punctuation">,</span> email<span class="token punctuation">,</span> address<span class="token punctuation">,</span> city<span class="token punctuation">,</span> postcode<span class="token punctuation">,</span> country<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">&apos;John Smith&apos;</span><span class="token punctuation">,</span><span class="token string">&apos;j.smith@johnsmith.org&apos;</span><span class="token punctuation">,</span><span class="token string">&apos;11 New Road&apos;</span><span class="token punctuation">,</span><span class="token string">&apos;Liverpool&apos;</span><span class="token punctuation">,</span><span class="token string">&apos;L10 2AB&apos;</span><span class="token punctuation">,</span><span class="token string">&apos;UK&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> hotels <span class="token punctuation">(</span>name<span class="token punctuation">,</span> rooms<span class="token punctuation">,</span> postcode<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">&apos;Triple Point Hotel&apos;</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">&apos;CM194JS&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> bookings <span class="token punctuation">(</span>customer_id<span class="token punctuation">,</span> hotel_id<span class="token punctuation">,</span> checkin_date<span class="token punctuation">,</span> nights<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&apos;2019-10-01&apos;</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>The data you insert should be of the same type with your table definition. For example, the following insert statement will <strong>fail</strong>:</p>
<pre class="language-"><code class="lang-sql"><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> bookings <span class="token punctuation">(</span>customer_id<span class="token punctuation">,</span> hotel_id<span class="token punctuation">,</span> checkin_date<span class="token punctuation">,</span> nights<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&apos;2019-14-01&apos;</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h4 id="exercise-3">Exercise 3</h4>
<ul>
<li>Run the 3 SQL statements above.</li>
<li>Insert yourself in the <code>customers</code> table.</li>
<li>Insert the following 3 hotels in the <code>hotels</code> table:<ul>
<li>The <code>Triple Point Hotel</code> has 10 rooms, its postcode is <code>CM194JS</code></li>
<li>The <code>Royal Cosmos Hotel</code> has 5 rooms, its postcode is <code>TR209AX</code></li>
<li>The <code>Pacific Petal Motel</code> has 15 rooms, its postcode is <code>BN180TG</code></li>
</ul>
</li>
<li>Try to insert a booking for a customer id which does not exist in the <code>customers</code> table (for example ID <code>100</code>). What is happening and why?</li>
</ul>
<h3 id="retrieving-data">Retrieving data</h3>
<p>Previously, you have inserted data in your tables. How do you make sure these data have been inserted correctly? The following SQL statement is used to request data from a specific table:</p>
<pre class="language-"><code class="lang-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> customers<span class="token punctuation">;</span>
</code></pre>
<h4 id="exercise-4">Exercise 4</h4>
<ul>
<li>Use the above SQL statement to display all the data inserted in the <code>customers</code> table.</li>
<li>Use the above SQL statement to display all the data inserted in the <code>hotels</code> table.</li>
<li>Use the above SQL statement to display all the data inserted in the <code>bookings</code> table.</li>
</ul>
<h3 id="retrieving-data-with-conditions">Retrieving data with conditions</h3>
<p>Actually, the <code>SELECT</code> statement is very powerful and you will see you can request a lot of different things with it. Have you seen the <code>*</code> character in the SQL statement above? It means that you want to see the data for all the columns of the table. What if you want to only return specific columns? For example, to retrieve all customers <code>name</code> and <code>address</code> from the table <code>customers</code>:</p>
<pre class="language-"><code class="lang-sql"><span class="token keyword">SELECT</span> name<span class="token punctuation">,</span>address <span class="token keyword">FROM</span> customers<span class="token punctuation">;</span>
</code></pre>
<p>Sometimes, you want to retrieve only data which verify a specific condition. In this case, you can use a <code>WHERE</code> clause. For example, to retrieve all hotels having more than 7 rooms:</p>
<pre class="language-"><code class="lang-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> hotels <span class="token keyword">WHERE</span> rooms <span class="token operator">&gt;</span> <span class="token number">7</span><span class="token punctuation">;</span>
</code></pre>
<p>To retrieve the customer name and address with id 1:</p>
<pre class="language-"><code class="lang-sql"><span class="token keyword">SELECT</span> name<span class="token punctuation">,</span>address <span class="token keyword">FROM</span> customers <span class="token keyword">WHERE</span> id <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
</code></pre>
<p>To retrieve all the bookings starting after 2019/10/01:</p>
<pre class="language-"><code class="lang-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> bookings <span class="token keyword">WHERE</span> checkin_date <span class="token operator">&gt;</span> <span class="token string">&apos;2019/10/01&apos;</span><span class="token punctuation">;</span>
</code></pre>
<p>To retrieve all the bookings starting after 2019/10/01 for a minimum of 2 nights:</p>
<pre class="language-"><code class="lang-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> bookings <span class="token keyword">WHERE</span> checkin_date <span class="token operator">&gt;</span> <span class="token string">&apos;2019/10/01&apos;</span> <span class="token operator">AND</span> nights <span class="token operator">&gt;=</span> <span class="token number">2</span><span class="token punctuation">;</span>
</code></pre>
<p>To retrieve all the hotels with the postcode <code>CM194JS</code> or <code>TR209AX</code>:</p>
<pre class="language-"><code class="lang-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> hotels <span class="token keyword">WHERE</span> postcode <span class="token operator">=</span> <span class="token string">&apos;CM194JS&apos;</span> <span class="token operator">OR</span> postcode <span class="token operator">=</span> <span class="token string">&apos;TR209AX&apos;</span><span class="token punctuation">;</span>
</code></pre>
<h4 id="exercise-5">Exercise 5</h4>
<ul>
<li>Execute the file <a href="cyf_hotels_exercise5.sql"><code>cyf_hotels_exercise5.sql</code></a> which will reset your existing tables and insert more data in the <code>customers</code>, <code>hotels</code> and <code>bookings</code> tables. (hint: in the terminal, use <code>psql -d cyf_hotels -f cyf_hotels_exercise5.sql</code>).</li>
<li>Retrieve all information for the customer Laurence Lebihan.</li>
<li>Retrieve all customers name living in UK.</li>
<li>Retrieve the address, city and postcode of Melinda Marsh.</li>
<li>Retrieve all hotels located in the postcode DGQ127.</li>
<li>Retrieve all hotels with more than 11 rooms.</li>
<li>Retrieve all hotels with more than 6 rooms but less than 15 rooms.</li>
<li>Retrieve all hotels with exactly 10 rooms or 20 rooms.</li>
<li>Retrieve all bookings for customer id 1.</li>
<li>Retrieve all bookings for more than 4 nights.</li>
<li>Retrieve all bookings starting in 2020.</li>
<li>Retrieve all bookings before 2020 for less than 4 nights.</li>
</ul>
<h2 id="homework">Homework</h2>
<ul>
<li>Create a new database called <code>cyf_classes</code> (hint: use <code>createdb</code> in the terminal)</li>
<li>Create a new table <code>mentors</code>, for each mentor we want to save their name, how many years they lived in Glasgow, their address and their favourite programming language.</li>
<li>Insert 5 mentors in the <code>mentors</code> table (you can make up the data, it doesn&apos;t need to be accurate ;-)).</li>
<li>Create a new table <code>students</code>, for each student we want to save their name, address and if they have graduated from Code Your Future.</li>
<li>Insert 10 students in the <code>students</code> table.</li>
<li>Verify that the data you created for mentors and students are correctly stored in their respective tables (hint: use a <code>select</code> SQL statement).</li>
<li>Create a new <code>classes</code> table to record the following information:<ul>
<li>A class has a leading mentor</li>
<li>A class has a topic (such as Javascript, NodeJS)</li>
<li>A class is taught at a specific date and at a specific location</li>
</ul>
</li>
<li>Insert a few classes in the <code>classes</code> table</li>
<li>We now want to store who among the students attends a specific class. How would you store that? Come up with a solution and insert some data if you model this as a new table.</li>
<li>Answer the following questions using a <code>select</code> SQL statement:<ul>
<li>Retrieve all the mentors who lived more than 5 years in Glasgow</li>
<li>Retrieve all the mentors whose favourite language is Javascript</li>
<li>Retrieve all the students who are CYF graduates</li>
<li>Retrieve all the classes taught before June this year</li>
<li>Retrieve all the students (retrieving student ids only is fine) who attended the Javascript class (or any other class that you have in the <code>classes</code> table).</li>
</ul>
</li>
</ul>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="../../node/week-14/lesson.html" class="navigation navigation-prev " aria-label="Previous page: Week 17 - More APIs in Node">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="../week-2/lesson.html" class="navigation navigation-next " aria-label="Next page: Week 19 - More SQL and integration with NodeJS">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Week 18 - Introduction to SQL","level":"1.8.3","depth":2,"next":{"title":"Week 19 - More SQL and integration with NodeJS","level":"1.8.4","depth":2,"path":"db/week-2/lesson.md","ref":"db/week-2/lesson.md","articles":[]},"previous":{"title":"Week 17 - More APIs in Node","level":"1.8.2","depth":2,"path":"node/week-14/lesson.md","ref":"node/week-14/lesson.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":["prism","-highlight","todo","scripts"],"pluginsConfig":{"prism":{"css":["prismjs/themes/prism-tomorrow.css"]},"scripts":{"files":["./checkboxRemember.js"]},"todo":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"db/week-1/lesson.md","mtime":"2020-05-06T15:33:04.036Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2020-05-06T15:33:53.972Z"},"basePath":"../..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../../gitbook/gitbook.js"></script>
    <script src="../../gitbook/theme.js"></script>
    
        
        <script src="../../gitbook/gitbook-plugin-scripts/865192367b808254b99cb0ba7092e452-checkboxRemember.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

