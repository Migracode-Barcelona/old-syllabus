
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Week 11 - Fetch and API Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-prism/prism-tomorrow.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="../week-12/lesson.html" />
    
    
    <link rel="prev" href="../week-10/lesson.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        <li class="header">Course</li>
        
        
    
        <li class="chapter " data-level="1.1" data-path="../../">
            
                <a href="../../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" >
            
                <span>
            
                    
                    Before you start
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="../../introduction/lesson0.html">
            
                <a href="../../introduction/lesson0.html">
            
                    
                    Week 1 - Introduction and terminal
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="../../introduction/lesson1.html">
            
                <a href="../../introduction/lesson1.html">
            
                    
                    Week 2 - Git and Github
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="../../others/house-rules.html">
            
                <a href="../../others/house-rules.html">
            
                    
                    House Rules
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4" data-path="../../CODE_OF_CONDUCT.html">
            
                <a href="../../CODE_OF_CONDUCT.html">
            
                    
                    Code of Conduct
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../../html-css/">
            
                <a href="../../html-css/">
            
                    
                    HTML/CSS
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="../../html-css/week-1/lesson.html">
            
                <a href="../../html-css/week-1/lesson.html">
            
                    
                    Week 1 - Semantic HTML and CSS
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="../../html-css/week-2/lesson.html">
            
                <a href="../../html-css/week-2/lesson.html">
            
                    
                    Week 2 - Responsive Web and layout
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="../../html-css/week-3/lesson.html">
            
                <a href="../../html-css/week-3/lesson.html">
            
                    
                    Week 3 - Bootstrap
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../../js-core/">
            
                <a href="../../js-core/">
            
                    
                    JavaScript I
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../../js-core/week-04/lesson.html">
            
                <a href="../../js-core/week-04/lesson.html">
            
                    
                    Week 4 - Hello JavaScript
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../../js-core/week-05/lesson.html">
            
                <a href="../../js-core/week-05/lesson.html">
            
                    
                    Week 5 - Expressions and loops
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="../../js-core/week-06/lesson.html">
            
                <a href="../../js-core/week-06/lesson.html">
            
                    
                    Week 6 - Arrays and callbacks
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../../js-core-2/">
            
                <a href="../../js-core-2/">
            
                    
                    JavaScript II
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="../../js-core-2/week-07/lesson.html">
            
                <a href="../../js-core-2/week-07/lesson.html">
            
                    
                    Week 7 - Objects
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="../../js-core-2/week-08/lesson.html">
            
                <a href="../../js-core-2/week-08/lesson.html">
            
                    
                    Week 8 - JS in the Browser
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="../../js-core-2/week-09/lesson.html">
            
                <a href="../../js-core-2/week-09/lesson.html">
            
                    
                    Week 9 - More JS in the Browser 
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../">
            
                <a href="../">
            
                    
                    JavaScript III
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="../week-10/lesson.html">
            
                <a href="../week-10/lesson.html">
            
                    
                    Week 10 - ES6 and debugging
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.6.2" data-path="lesson.html">
            
                <a href="lesson.html">
            
                    
                    Week 11 - Fetch and API
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3" data-path="../week-12/lesson.html">
            
                <a href="../week-12/lesson.html">
            
                    
                    Week 12 - Project
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="../../react/">
            
                <a href="../../react/">
            
                    
                    React
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="../../react/week-1/lesson.html">
            
                <a href="../../react/week-1/lesson.html">
            
                    
                    Week 13 - React 101
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2" data-path="../../react/week-2/lesson.html">
            
                <a href="../../react/week-2/lesson.html">
            
                    
                    Week 14 - Reacting to Changes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3" data-path="../../react/week-3/lesson.html">
            
                <a href="../../react/week-3/lesson.html">
            
                    
                    Week 15 - Fetching Data
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.4" data-path="../../react/week-4/lesson.html">
            
                <a href="../../react/week-4/lesson.html">
            
                    
                    Routing (optional)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.5" data-path="../../react/classes-optional/lesson.html">
            
                <a href="../../react/classes-optional/lesson.html">
            
                    
                    Class components (optional)
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="../../node/">
            
                <a href="../../node/">
            
                    
                    Node/DB
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1" data-path="../../node/week-13/lesson.html">
            
                <a href="../../node/week-13/lesson.html">
            
                    
                    Week 16 - Node and Express 101
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2" data-path="../../node/week-14/lesson.html">
            
                <a href="../../node/week-14/lesson.html">
            
                    
                    Week 17 - More APIs in Node
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.3" data-path="../../db/week-1/lesson.html">
            
                <a href="../../db/week-1/lesson.html">
            
                    
                    Week 18 - Introduction to SQL
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.4" data-path="../../db/week-2/lesson.html">
            
                <a href="../../db/week-2/lesson.html">
            
                    
                    Week 19 - More SQL and integration with NodeJS
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.5" data-path="../../db/week-3/lesson.html">
            
                <a href="../../db/week-3/lesson.html">
            
                    
                    Week 20 - SQL with NodeJS
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.6" data-path="../../db/week-4/lesson.html">
            
                <a href="../../db/week-4/lesson.html">
            
                    
                    Week 21 - NodeJS Workshop
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="header">Useful information</li>
        
        
    
        <li class="chapter " data-level="2.1" data-path="../../others/useful-links.html">
            
                <a href="../../others/useful-links.html">
            
                    
                    Useful links
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="../../others/PRACTICES.html">
            
                <a href="../../others/PRACTICES.html">
            
                    
                    Coding Standards and Best Practices
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="../../others/career-development.html">
            
                <a href="../../others/career-development.html">
            
                    
                    Career Development
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Other resources</li>
        
        
    
        <li class="chapter " data-level="3.1" data-path="../../others/git.html">
            
                <a href="../../others/git.html">
            
                    
                    Git
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="../../others/coding-101.html">
            
                <a href="../../others/coding-101.html">
            
                    
                    Coding 101
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.3" data-path="../../others/aws-workshop-2.html">
            
                <a href="../../others/aws-workshop-2.html">
            
                    
                    AWS - DynamoDB
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.4" >
            
                <a target="_blank" href="https://github.com/Thomas-Stewart/syllabus/tree/master/java">
            
                    
                    Java module
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">For Mentors</li>
        
        
    
        <li class="chapter " data-level="4.1" data-path="../../others/mentors-guide.html">
            
                <a href="../../others/mentors-guide.html">
            
                    
                    Mentors Guide
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.2" data-path="../../others/mentors-weeks.html">
            
                <a href="../../others/mentors-weeks.html">
            
                    
                    Mentors Weekly Contents
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../.." >Week 11 - Fetch and API</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="js-core-iii---2">JS Core III - 2</h1>
<h2 id="learning-objectives">Learning Objectives</h2>
<ul>
<li>The learner should understand what the acronym API means</li>
<li>The learner can define what an API&apos;s purpose is and why it is useful</li>
<li>The learner should be able to edit the structure of a API URL and to change the data retrieved from the server</li>
<li>The learner should be able to define what a <code>Promise</code> is</li>
<li>The learner should understand what <code>fetch</code> is and what it is used for</li>
<li>The learner should be able to use <code>fetch</code> to retrieve <code>JSON</code> from an API</li>
<li>The learner should be able to parse the <code>JSON</code> and extract data from it</li>
<li>The learner should be able to use <code>DOM</code> manipulation to add content to the <code>DOM</code></li>
<li>The learner should understand <code>window.onload</code> and <code>document.onload</code> and should be able to assign functions to run at specific life cycle events</li>
</ul>
<h2 id="1-how-the-web-works---quick-recap">1. How the web works - quick recap</h2>
<p>In this session we will look at how computer talk to each other using the web.</p>
<p>At the core of the web is the URL, which stands for Uniform Resource Locator. We use the term resource to mean anything that a server might return such as webpage, CSS, JavaScript, image, data etc. A good way to think of a URL is as an address. It allows us to refer to webpages, images, data etc that is stored on servers elsewhere.</p>
<h3 id="methods">Methods</h3>
<p>The main methods used to send requests on the web are <code>GET</code> and <code>POST</code>. However, later in the course when we look at building APIs using Node we will also look at other methods such as <code>PUT</code> and <code>DELETE</code>.</p>
<p>A <code>GET</code> method is a way of asking a server for a webpage, resource or a piece of data. For example, when we type a URL into a browser and submit it. The browser will send a <code>GET</code> request.</p>
<p>A <code>POST</code> method is used to send data to a server.</p>
<p>The main difference between <code>GET</code> and <code>POST</code> is that a <code>POST</code> method has a body, that is it can contain some data that we are sending. Whereas a <code>GET</code> does not have a body since we use it to request data.</p>
<h3 id="headers">Headers</h3>
<p>Each request and response sent has meta data, information about the data, at the beginning called a <code>header</code>. The <code>header</code> contains information such as a</p>
<ul>
<li>status code indicating whether a request was successful</li>
<li>content type which indicates what the request or response contains</li>
</ul>
<p>as well as lots of other things we won&apos;t cover here</p>
<h3 id="status-codes">Status codes</h3>
<p>Each response returned needs to contain a <code>status</code> code which tells the client whether the request was successful. If the request succeeded the response code will be <code>200</code>. If the resource you tried to access was not found the response code used is <code>404</code>.</p>
<p>Some status codes you may have come across before are:</p>
<ul>
<li><code>200</code> ok. Request was successful</li>
<li><code>301</code> moved permanently. Used to redirect request when moved permanently</li>
<li><code>401</code> Unauthorised. User credentials were not supplied</li>
<li><code>404</code> Not found</li>
<li><code>500</code> Internal server error</li>
</ul>
<p>The response codes can be grouped into categories</p>
<ul>
<li>1xx: Informational</li>
<li>2xx: Success</li>
<li>3xx: Redirection</li>
<li>4xx: Client Error</li>
<li>5xx: Server Error</li>
</ul>
<p>If you want a fun look at HTTP codes, take a look at <a href="https://httpstatusdogs.com/" target="_blank">https://httpstatusdogs.com/</a> or <a href="https://http.cat/" target="_blank">https://http.cat/</a> if you are cat person. For a technical perspective take a look at <a href="https://en.wikipedia.org/wiki/List_of_HTTP_status_codes" target="_blank">https://en.wikipedia.org/wiki/List_of_HTTP_status_codes</a>.</p>
<h3 id="content-type">Content type</h3>
<p>When sending data across the web, we need to specify in the header what the request or response contains. To do that, the <code>content-type</code> header is used. That way the receiver knows what to do with the data received.</p>
<p>Common content types include</p>
<ul>
<li><code>text/html</code> - HTML web page</li>
<li><code>text/css</code> - CSS</li>
<li><code>image/jpeg</code> - JPEG image</li>
<li><code>application/javascript</code> - JavaScript code</li>
<li><code>application/json</code> - JSON data</li>
</ul>
<h3 id="exercise">Exercise</h3>
<pre class="language-"><code>In Slack post answers to the following

- What can HTTP headers contain?
- What is the purpose of status codes?
- What can an HTTP message contain?
</code></pre><h2 id="2-what-are-apis-and-how-to-interact-with-them">2. What are APIs and how to interact with them</h2>
<h3 id="explanation">Explanation</h3>
<ul>
<li>API stands for <code>Application Programming Interface</code></li>
<li>APIs are created by providers and used by consumers</li>
<li>It is a specific part of a larger system that can be contacted by other systems, for example from the internet.</li>
<li>When we connect to an <code>API</code> we say that we are connecting to an <code>Endpoint</code></li>
<li>Some well-known APIs are <a href="https://developers.facebook.com/" target="_blank">Facebook APIs</a>, <a href="https://developer.twitter.com/en/docs" target="_blank">Twitter APIs</a>, <a href="https://developers.google.com/maps/documentation" target="_blank">Maps APIs</a> and many many more</li>
<li>In particular, an API doesn&apos;t care what language or technology is used in the consumer or the provider</li>
</ul>
<p>An API is a set of rules that allow programs to talk to each other. The developer creates the API on the server and allows the client to talk to it. An example of a server is the application on a computer hosting a website and an example of a client is the browser on the phone trying to access the website.</p>
<h4 id="why-do-we-need-apis">Why do we need APIs?</h4>
<p>Imagine that I am a big social network and I want to give developers all over the world access to the data on the people on my website.</p>
<p>What are some problems that I would have with sharing my data with everyone?</p>
<ol>
<li>Some of the information that I have is public (for example, peoples names) whilst other information I have is private (for example, email addresses). I want to make sure that I only ever give developers access to peoples names but never to their email addresses - otherwise they could send them spam email.</li>
<li>I want to make sure that when developers ask for my data I can control who has access to it. I like that my users data is being used to make their lives better but I don&apos;t like it when companies try to sell them new stuff they don&apos;t need.</li>
<li>Some developers might want to change some of the users details on my social network and this would get very messy quickly if people where allowed to change whatever they wanted</li>
</ol>
<p>An API is a special type of program what acts as a <strong>gatekeeper</strong> to all of this information. Having an API means that I can control which information is shared about my users and who it is shared with. Perfect!</p>
<h4 id="types-of-apis">Types of APIs:</h4>
<ul>
<li>Private: for employees only under a company network for internal use.</li>
<li>Semi-private: for clients who paid for the API.</li>
<li>Public: for everyone on the web (but may or may not need an account to use).</li>
</ul>
<h5 id="examples">Examples</h5>
<p>Here is the API endpoint for Transport For London</p>
<p><a href="https://api.tfl.gov.uk" target="_blank">https://api.tfl.gov.uk</a></p>
<p>The data from this endpoint will be used by many apps that you use every day - Google Maps and Citymapper to name two.</p>
<p>This endpoint will get location of all of the Bikepoints in London.</p>
<p><a href="https://api.tfl.gov.uk/BikePoint" target="_blank">https://api.tfl.gov.uk/BikePoint</a></p>
<p>That&apos;s a lot of Bikes! It would be better if we could search for a location. Luckily this API let&apos;s us search for places.</p>
<p><a href="https://api.tfl.gov.uk/BikePoint/Search?query=Clerkenwell" target="_blank">https://api.tfl.gov.uk/BikePoint/Search?query=Clerkenwell</a></p>
<p>This API also has lots of other endpoints that we can use to get other data. For example, lets find the Air Quality of London.</p>
<p><a href="https://api.tfl.gov.uk/AirQuality" target="_blank">https://api.tfl.gov.uk/AirQuality</a></p>
<p>As you can see the URL changes the data that we get from the API. This can be broken down like this</p>
<p><img src="../assets/api-breakdown.png" alt=""></p>
<h3 id="exercise">Exercise</h3>
<p><strong>Task (5 mins):</strong></p>
<pre class="language-"><code>Let&apos;s use the TFL API to get data about the London Underground

https://api.tfl.gov.uk

1.  Which endpoint would you use to find out if there is a disruption on the &apos;central&apos; line? 2. Does the &apos;central&apos; line have a disruption right now? Name another line that has a disruption on it.

Hint: Use your browser to access the endpoints
</code></pre><h4 id="recap">Recap</h4>
<p><strong>Question:</strong></p>
<pre class="language-"><code>Which of the following statements below about APIs is false?

A) Public APIs can be accessed by anyone on the Internet.
B) You must use Javascript to access an API.
C) APIs can control access to data or features of an application.
D) You can change data via an API.
</code></pre><p><strong>Question:</strong></p>
<pre class="language-"><code>Give an example of a company that uses an API to allow access to their data.
</code></pre><h2 id="3-how-to-use-fetch-to-do-network-requests">3. How to use <code>fetch</code> to do network requests</h2>
<h3 id="explanation">Explanation</h3>
<ul>
<li>Fetch is a function to request from other places on the web</li>
<li>Fetch is defined in the browser which means it can be used without using an external library (<code>window.fetch</code>)</li>
<li>Fetch is available in nearly all browser but it&apos;s good to check which ones it won&apos;t work in<ul>
<li>We can use this website to help us - <a href="https://caniuse.com/#feat=fetch" target="_blank">caniuse.com</a>)</li>
</ul>
</li>
<li>Fetch API documentations by Mozilla <a href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch" target="_blank">link</a></li>
</ul>
<h3 id="how-does-fetch-work">How does fetch work?</h3>
<p>Fetch uses a JavaScript pattern called &quot;Promises&quot; which has a very specific structure.</p>
<p>You can think of a Promise as you would think of a promise you make to another person - you make a promise that something will happen in the future. For example - I promise to call you later, I promise to go to the shops and buy milk later.</p>
<p>Using Promises allows us to schedule functions to be called after some asynchronous code finishes running. We can specify different functions depending on whether the asynchronous code was successful or ran into an error.</p>
<p>Promises can make it easier to split our code into small functions and make code easier to read. They also make it easier to handle errors.</p>
<p>In this example we</p>
<ol>
<li>Get the <code>Promise</code> that we will get the milk from the shops (this could take a long time so it&apos;s good that it&apos;s a <code>Promise</code>!)</li>
<li>When the milk has arrived from the shop <code>then</code> I should drink it and <code>return</code> the bottle so I can do something else with it</li>
<li>When I&apos;ve drank the milk <code>then</code> I should recycle the bottle</li>
<li>If anything goes wrong with those steps I should <code>catch</code> the error and <code>warn</code> everyone what happened</li>
</ol>
<h3 id="example">Example</h3>
<pre class="language-"><code class="lang-javascript">getMilkFromShops
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">milk</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">I&apos;ve got the milk</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    milk<span class="token punctuation">.</span><span class="token function">drink</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> milk<span class="token punctuation">.</span>bottle<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">bottle</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">I&apos;m going to recycle the bottle</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    bottle<span class="token punctuation">.</span><span class="token function">recycle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span><span class="token string">&quot;Oh no, I dropped the milk&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h4 id="example-1">Example 1</h4>
<p><em>Live Coding Exercise</em></p>
<p>Let&apos;s step through how the Fetch function is used and what it is comprised of</p>
<pre class="language-"><code class="lang-javascript"><span class="token comment">//Retrieve the JSON</span>
<span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">&quot;https://cat-fact.herokuapp.com/facts&quot;</span><span class="token punctuation">)</span>
  <span class="token comment">// Get the response and extract the JSON</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> response<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token comment">// Do something with the JSON</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">headlines</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>headlines<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token comment">// If something goes wrong</span>
  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h4 id="example-2">Example 2</h4>
<p><em>Live Coding Exercise</em></p>
<p>Wouldn&apos;t it be cool to make a new friend with just the click of a button?</p>
<p>Write a function that makes an API call using <code>fetch</code> to <code>https://www.randomuser.me/api</code></p>
<ul>
<li>The function should make an API call to the given endpoint: <code>https://www.randomuser.me/api</code></li>
<li>Log the received data to the console</li>
<li>Incorporate error handling</li>
<li>Show how you can build a profile page for the user using the DOM<ul>
<li>Add a name</li>
<li>Add a profile picture</li>
<li>Add some styling using CSS</li>
</ul>
</li>
</ul>
<h3 id="error-handling">Error handling</h3>
<p>We saw earlier that each HTTP response contains an status code which indicates if our request was successful or not. If the our request failed we usually want to handle it appropriately.</p>
<p>We can handle these errors gracefully in your code by checking the <code>status</code> and <code>statusText</code> value of the response:</p>
<pre class="language-"><code class="lang-javascript"><span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">&quot;https://httpstat.us/500&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>response<span class="token punctuation">.</span>status <span class="token operator">&gt;=</span> <span class="token number">200</span> <span class="token operator">&amp;&amp;</span> response<span class="token punctuation">.</span>status <span class="token operator">&lt;=</span> <span class="token number">299</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> response<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span>
        <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Encountered something unexpected: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>response<span class="token punctuation">.</span>status<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>response<span class="token punctuation">.</span>statusText<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">jsonResponse</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// do whatever you want with the JSON response</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// Handle the error</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h4 id="recap">Recap</h4>
<p><strong>Task (5 mins):</strong></p>
<pre class="language-"><code>Complete the rest of this code to connect to the following API: `https://dog.ceo/api/breeds/image/random`

    fetch(_____)
    .then(_____)
    .then(body =&gt; console.log(body))
    .catch(error =&gt; console.log(error));
</code></pre><h2 id="homework">Homework</h2>
<p>Follow the steps and complete all the steps you can from the <a href="https://docs.google.com/presentation/d/1vdQT9M8jMmdWwhEOWUTBkNP5E0ddEdpV5pQtjf9acaM/edit#slide=id.g879a9f0369_0_124" target="_blank">Weather Project</a></p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="../week-10/lesson.html" class="navigation navigation-prev " aria-label="Previous page: Week 10 - ES6 and debugging">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="../week-12/lesson.html" class="navigation navigation-next " aria-label="Next page: Week 12 - Project">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Week 11 - Fetch and API","level":"1.6.2","depth":2,"next":{"title":"Week 12 - Project","level":"1.6.3","depth":2,"path":"js-core-3/week-12/lesson.md","ref":"js-core-3/week-12/lesson.md","articles":[]},"previous":{"title":"Week 10 - ES6 and debugging","level":"1.6.1","depth":2,"path":"js-core-3/week-10/lesson.md","ref":"js-core-3/week-10/lesson.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":["prism","-highlight","todo","scripts"],"pluginsConfig":{"prism":{"css":["prismjs/themes/prism-tomorrow.css"]},"scripts":{"files":["./checkboxRemember.js"]},"todo":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"js-core-3/week-11/lesson.md","mtime":"2021-01-23T15:58:26.153Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2021-01-23T15:59:16.237Z"},"basePath":"../..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../../gitbook/gitbook.js"></script>
    <script src="../../gitbook/theme.js"></script>
    
        
        <script src="../../gitbook/gitbook-plugin-scripts/865192367b808254b99cb0ba7092e452-checkboxRemember.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

